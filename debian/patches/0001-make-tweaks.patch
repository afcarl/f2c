From: "Barak A. Pearlmutter" <barak+git@cs.nuim.ie>
Date: Tue, 14 Feb 2012 13:43:17 +0000
Subject: make tweaks

tweak src/makefile.u, and supply stub top-level Makefile
---
 Makefile       |    4 ++++
 src/makefile.u |    6 +++---
 2 files changed, 7 insertions(+), 3 deletions(-)
 create mode 100644 Makefile

diff --git a/Makefile b/Makefile
new file mode 100644
index 0000000..dd4f903
--- /dev/null
+++ b/Makefile
@@ -0,0 +1,4 @@
+all:
+
+%:
+	$(MAKE) -C src -f makefile.u $@
diff --git a/src/makefile.u b/src/makefile.u
index 0f12022..7550218 100644
--- a/src/makefile.u
+++ b/src/makefile.u
@@ -7,8 +7,8 @@ SHELL = /bin/sh
 YACC = yacc
 YFLAGS =
 
-.c.o:
-	$(CC) -c $(CFLAGS) $*.c
+#.c.o:
+#	$(CC) -c $(CFLAGS) $*.c
 
 OBJECTSd = main.o init.o gram.o lex.o proc.o equiv.o data.o format.o \
 	  expr.o exec.o intr.o io.o misc.o error.o mem.o names.o \
@@ -27,7 +27,7 @@ OBJECTS = $(OBJECTSd) $(MALLOC)
 all: f2c
 
 f2c: $(OBJECTS)
-	$(CC) $(LDFLAGS) $(OBJECTS) -o f2c
+	$(CC) $(LDFLAGS) $^ $(LOADLIBES) $(LDLIBS) -o $@
 
 # The following used to be a rule for gram.c rather than gram1.c, but
 # there are too many broken variants of yacc around, so now we
-- 
